<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Cardano Assets Live</title>
    <style>
        body { background: #0a0f1e; color: #f8fafc; font-family: sans-serif; text-align: center; padding: 40px 20px; }
        .card { background: #161e35; padding: 30px; border-radius: 20px; border: 1px solid #2d3748; max-width: 400px; margin: 20px auto; box-shadow: 0 10px 25px rgba(0,0,0,0.4); }
        .label { color: #94a3b8; font-size: 0.9rem; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; }
        .price { font-size: 2.5rem; font-weight: bold; color: #38bdf8; margin: 15px 0; }
        .usd { color: #64748b; font-size: 1.1rem; }
        #status { font-size: 0.7rem; color: #475569; margin-top: 20px; }
    </style>
</head>
<body>

    <h2>Cardano Ecosystem Monitor</h2>

    <div class="card">
        <div class="label">ORACLE / ADA</div>
        <div id="price-oracle" class="price">... ₳</div>
        <div id="usd-oracle" class="usd">Cargando...</div>
    </div>

    <div class="card">
        <div class="label">VLRM / ADA</div>
        <div id="price-vlrm" class="price">... ₳</div>
        <div id="usd-vlrm" class="usd">Cargando...</div>
    </div>

    <div id="status">Actualizando automáticamente cada 60 segundos...</div>

<script>
    // IDs de CoinGecko para estos tokens
    // Nota: Usamos los IDs que CoinGecko asigna a estos proyectos
    async function updateDashboard() {
        try {
            // 1. Obtener precio de ADA
            const adaRes = await fetch("https://api.coingecko.com/api/v3/simple/price?ids=cardano&vs_currencies=usd");
            const adaData = await adaRes.json();
            const adaPriceUsd = adaData.cardano.usd;

            // 2. Obtener precios de ORACLE y VLRM por su contrato en Cardano
            // Usamos el endpoint de monedas por contrato
            const oracleID = "oracle-token"; // ID común en CoinGecko
            const vlrmID = "velorum";     // ID común en CoinGecko

            const tokenRes = await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${oracleID},${vlrmID}&vs_currencies=usd`);
            const tokenData = await tokenRes.json();

            // Procesar ORACLE
            if (tokenData[oracleID]) {
                const oracleUsd = tokenData[oracleID].usd;
                const oracleAda = oracleUsd / adaPriceUsd;
                document.getElementById('price-oracle').innerText = oracleAda.toFixed(3) + " ₳";
                document.getElementById('usd-oracle').innerText = "$" + oracleUsd.toFixed(4) + " USD";
            }

            // Procesar VLRM
            if (tokenData[vlrmID]) {
                const vlrmUsd = tokenData[vlrmID].usd;
                const vlrmAda = vlrmUsd / adaPriceUsd;
                document.getElementById('price-vlrm').innerText = vlrmAda.toFixed(3) + " ₳";
                document.getElementById('usd-vlrm').innerText = "$" + vlrmUsd.toFixed(4) + " USD";
            }

        } catch (e) {
            console.error("Error:", e);
            // Si CoinGecko falla por IDs, intentamos un último método de respaldo
            document.getElementById('usd-oracle').innerText = "Buscando fuente alternativa...";
        }
    }

    updateDashboard();
    setInterval(updateDashboard, 60000);
</script>
</body>
</html>