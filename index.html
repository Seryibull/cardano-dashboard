<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Cardano Live Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root { --bg: #0a0f1e; --card: #161e35; --accent: #3b82f6; --text: #f8fafc; }
        body { background-color: var(--bg); color: var(--text); font-family: sans-serif; padding: 20px; text-align: center; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; max-width: 900px; margin: 20px auto; }
        .card { background: var(--card); padding: 25px; border-radius: 15px; border: 1px solid #2d3748; transition: 0.3s; }
        .card:hover { border-color: var(--accent); }
        .price { font-size: 2rem; font-weight: bold; color: #60a5fa; margin: 10px 0; }
        .badge { background: #1e293b; padding: 5px 10px; border-radius: 5px; font-size: 0.8rem; }
    </style>
</head>
<body>

    <h1>Cardano Ecosystem Monitor</h1>

    <div class="grid">
        <div class="card">
            <span class="badge">TOKEN</span>
            <h3>ORACLE</h3>
            <div id="price-oracle" class="price">Cargando...</div>
            <div id="status-oracle">Conectando con la red...</div>
        </div>

        <div class="card">
            <span class="badge">TOKEN</span>
            <h3>VLRM</h3>
            <div id="price-vlrm" class="price">Cargando...</div>
            <div id="status-vlrm">Conectando con la red...</div>
        </div>
    </div>

    <div style="max-width:900px; margin: auto; background: var(--card); padding: 20px; border-radius: 15px;">
        <canvas id="miniChart" height="100"></canvas>
    </div>

<script>
    // Usaremos GeckoTerminal que no requiere llaves y es muy estable para Cardano
    async function fetchPrices() {
        try {
            // Dirección de red de Cardano en GeckoTerminal + Policy IDs
            const url = "https://api.geckoterminal.com/api/v2/networks/cardano/tokens/multi/fb3b359f1498b8120364d2621415dfb0e258673a5a8e029307c08882%2C682bc8159f80a47f2010887e0767228a4740e53f19159981881a547d";
            
            const response = await fetch(url);
            const result = await response.json();
            const tokens = result.data;

            tokens.forEach(token => {
                const price = parseFloat(token.attributes.price_usd).toFixed(5);
                const volume = token.attributes.volume_usd.h24;
                
                if(token.attributes.address.includes('fb3b35')) { // ORACLE
                    document.getElementById('price-oracle').innerText = "$" + price;
                    document.getElementById('status-oracle').innerText = "Vol 24h: $" + Math.round(volume).toLocaleString();
                } else { // VLRM
                    document.getElementById('price-vlrm').innerText = "$" + price;
                    document.getElementById('status-vlrm').innerText = "Vol 24h: $" + Math.round(volume).toLocaleString();
                }
            });
        } catch (error) {
            console.error(error);
            document.getElementById('status-oracle').innerText = "Reintentando conexión...";
        }
    }

    // Gráfica visual sencilla
    const ctx = document.getElementById('miniChart').getContext('2d');
    new Chart(ctx, {
        type: 'line',
        data: {
            labels: ['1h', '2h', '3h', '4h', '5h', '6h'],
            datasets: [{ label: 'Actividad de Red', data: [10, 25, 15, 30, 45, 40], borderColor: '#3b82f6', tension: 0.4 }]
        },
        options: { plugins: { legend: { display: false } }, scales: { y: { display: false }, x: { display: false } } }
    });

    fetchPrices();
    setInterval(fetchPrices, 30000); // Actualizar cada 30 segundos
</script>
</body>
</html>